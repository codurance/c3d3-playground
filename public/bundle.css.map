{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "../src/App.svelte",
    "../src/Map.svelte"
  ],
  "sourcesContent": [
    "<script>\n  import Map from './Map.svelte'\n  export let name;\n</script>\n\n<style>\n  h1 {\n    color: purple;\n  }\n</style>\n\n<h1>Hello {name}!</h1>\n<Map />\n",
    "<script>\nimport { onMount } from 'svelte';\nconst FINAL = \"https://gist.githubusercontent.com/damianpumar/862fe8d75f92a0b114ad4ae2bf128e13/raw/21dc4b07207455034b1e48022ae53f3a84fe5ece/finaltopojson\"\n\nconst path = d3.geoPath();\n\nlet widthParent\nlet features\nlet barcelona\nlet colorScaleExtent = [0,0]\n\n$: width = widthParent\n$: height = widthParent / .5\n$: filter = 0\n$: quantize = d3.scaleQuantize().domain(colorScaleExtent).range(COLORS);\n$: selectElement = null\n$: showTooltip = false\n$: tooltipValues = {}\n\nonMount(async () => {\n  const data = await fetch(FINAL);\n  barcelona = await data.json();\n  features = await topojson.feature(barcelona, barcelona.objects.ABS_2018).features;\n  colorScaleExtent = d3.extent(barcelona.objects.ABS_2018.geometries.map(({properties}) => properties.VALORES ? properties.VALORES[filter] : 0));\n  widthParent = d3.select(\"#map\").node().getBoundingClientRect().width;\n})\nconst COLORS = [\"#ffffff\", \"#ffd333\", \"#ffde66\", \"#fff4cc\", \"#ffe999\"];\n\nfunction setFilter(indexOfFilter) {\n  filter = indexOfFilter\n}\n\nfunction handleMouseOver() {\n  showTooltip = true\n  selectElement = d3.select(this)\n  selectElement.attr('fill', \"orange\");\n}\n\nfunction handleMouseMove(d, event) {\n  const { NOMABS, NOMAGA, NOMSS, VALORES } = d.properties\n  tooltipValues = {\n    NOMABS,\n    NOMAGA,\n    NOMSS,\n    VALORES,\n    left: event.clientX,\n    top: event.clientY,\n  }\n}\n\nconst handleMouseOut = feature => () => {\n  showTooltip = false\n  const quantizedColor = quantize(Number(feature.properties.VALORES ? feature.properties.VALORES[filter] : 0))\n  selectElement.attr('fill', quantizedColor);\n}\n</script>\n\n<style>\n.tooltip {\n      position: absolute;\n      font-family: Roboto,Arial,sans-serif;\n      text-align: left;\n      font-size: 12px;\n      padding: 4px;\n      color: #212121;\n      pointer-events: none;\n      border: 1px solid #e3e3e3;\n      border-radius: 5px;\n      background: rgba(255, 255, 255, 0.96);\n      box-shadow: 2px 2px 6px -4px #999;\n    }\n</style>\n\n<div id=\"map\">\n  <div>\n    <button on:click={() => setFilter(0)}>\n      filter 1\n    </button>\n    <button on:click={() => setFilter(1)}>\n      filter 2\n    </button>\n    <button on:click={() => setFilter(2)}>\n      filter 3\n    </button>\n  </div>\n  <svg viewBox={`0 0 ${width || 0} ${height || 0}`}>\n    <g>\n    {#if features}\n      {#each features as feature}\n\n        <path\n          d={path(feature)}\n          fill={quantize(Number(feature.properties.VALORES ? feature.properties.VALORES[filter] : 0))}\n          stroke=\"black\"\n          on:mouseover={handleMouseOver}\n          on:mousemove={event => handleMouseMove(feature, event)}\n          on:mouseout={handleMouseOut(feature)}\n        />\n\n        <text style=\"font-size: 10px\" transform={`translate(${path.centroid(feature)})`}>\n          {feature.properties.NOMABS.replace('Barcelona - ', '')}\n        </text>\n\n      {/each}\n    {:else}\n      loading\n    {/if}\n    </g>\n  </svg>\n</div>\n{#if showTooltip}\n  <div class=\"tooltip\" style={showTooltip ? `opacity: .9; top: ${tooltipValues.top}px; left: ${tooltipValues.left}px` : \"opacity: 0\"}>\n        <p>{tooltipValues.NOMABS}</p>\n        <p>{tooltipValues.NOMAGA}</p>\n        <p>{tooltipValues.NOMSS}</p>\n        <p>{tooltipValues.VALORES ? tooltipValues.VALORES[filter] : \"No Data\"}</p>\n  </div>\n{/if}\n"
  ],
  "names": [],
  "mappings": "AAME,EAAE,eAAC,CAAC,AACF,KAAK,CAAE,MAAM,AACf,CAAC;ACkDH,QAAQ,eAAC,CAAC,AACJ,QAAQ,CAAE,QAAQ,CAClB,WAAW,CAAE,MAAM,CAAC,KAAK,CAAC,UAAU,CACpC,UAAU,CAAE,IAAI,CAChB,SAAS,CAAE,IAAI,CACf,OAAO,CAAE,GAAG,CACZ,KAAK,CAAE,OAAO,CACd,cAAc,CAAE,IAAI,CACpB,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,CACzB,aAAa,CAAE,GAAG,CAClB,UAAU,CAAE,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CACrC,UAAU,CAAE,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,AACnC,CAAC"
}